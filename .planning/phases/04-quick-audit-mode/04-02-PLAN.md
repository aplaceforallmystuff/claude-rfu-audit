---
phase: 04-quick-audit-mode
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/SKILL.md
  - skill/templates/audit-report-quick.md
autonomous: true

must_haves:
  truths:
    - "Usage section shows --quick flag option"
    - "Mode detection logic documented (--quick flag present = quick mode)"
    - "Quick mode references config/gates-quick.md"
    - "Quick report template produces abbreviated output with triage recommendation"
    - "Quick report includes note about running full audit"
  artifacts:
    - path: "skill/SKILL.md"
      provides: "Updated usage with --quick flag and mode detection"
      contains: "--quick"
    - path: "skill/templates/audit-report-quick.md"
      provides: "Abbreviated report template for quick mode"
      contains: "Quick Score"
      min_lines: 50
  key_links:
    - from: "skill/SKILL.md"
      to: "skill/config/gates-quick.md"
      via: "mode selection reference"
      pattern: "config/gates-quick\\.md"
    - from: "skill/SKILL.md"
      to: "skill/templates/audit-report-quick.md"
      via: "template selection reference"
      pattern: "templates/audit-report-quick\\.md"
---

<objective>
Update SKILL.md with quick mode support and create the quick report template.

Purpose: SKILL.md needs to detect --quick flag and select appropriate gate config and template. The quick template produces an abbreviated report focused on triage recommendation.

Output: Updated SKILL.md with mode detection, new templates/audit-report-quick.md
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-quick-audit-mode/04-RESEARCH.md

@skill/SKILL.md
@skill/templates/audit-report.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update SKILL.md Usage section with --quick flag</name>
  <files>skill/SKILL.md</files>
  <action>
Update the "## Usage" section in SKILL.md to include the --quick flag option.

**Current Usage section:**
```
## Usage

```
/rfu-audit [project-path]
/rfu-audit ~/Dev/my-project
```

If no path provided, audits the current working directory.
```

**Change to:**
```markdown
## Usage

```
/rfu-audit [project-path] [--quick]
/rfu-audit ~/Dev/my-project
/rfu-audit ~/Dev/my-project --quick
```

If no path provided, audits the current working directory.

### Mode Selection

| Flag | Mode | Gates | Config | Template |
|------|------|-------|--------|----------|
| (none) | Full | 11 gates | `config/gates-full.md` | `templates/audit-report.md` |
| `--quick` | Quick | 5 gates | `config/gates-quick.md` | `templates/audit-report-quick.md` |

**Quick mode** runs a 5-gate subset (Gates 1, 3, 4, 5, 9) for rapid triage in 5-10 minutes. Use it to filter projects before committing to a full audit.

**Full mode** runs all 11 gates for comprehensive evaluation (45-90 minutes). Use it after quick mode passes or for final go/no-go decisions.
```
  </action>
  <verify>
Read skill/SKILL.md Usage section and confirm:
- Shows `[--quick]` in usage syntax
- Shows example with --quick flag
- Mode Selection table exists with both modes
- References config/gates-quick.md and templates/audit-report-quick.md
  </verify>
  <done>
SKILL.md Usage section documents --quick flag with mode selection table.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update SKILL.md Process section for mode awareness</name>
  <files>skill/SKILL.md</files>
  <action>
Update the "## Process" section to include mode detection after validation.

**Current Process section starts with:**
```
0. **Validate input**: Run 6-stage validation (see Input Validation section)
1. **Read project files**: README, package.json, main source files
2. **Walk through each gate sequentially** (detailed in `config/gates-full.md`)
...
```

**Change step 2 to be mode-aware:**
```markdown
2. **Select mode**: Based on `--quick` flag:
   - Quick mode: Use `config/gates-quick.md` (5 gates)
   - Full mode: Use `config/gates-full.md` (11 gates)
3. **Walk through each gate sequentially** (per selected config)
4. **Score each gate**: Pass (1) or Fail (0)
5. **Provide evidence** for each score
6. **Generate prioritized fix recommendations** (full mode) or triage recommendation (quick mode)
7. **Output structured report** using corresponding template:
   - Quick mode: `templates/audit-report-quick.md`
   - Full mode: `templates/audit-report.md`
```

Renumber subsequent steps as needed.
  </action>
  <verify>
Read skill/SKILL.md Process section and confirm:
- Step 2 is "Select mode" with --quick detection
- References both config files
- Step 7 (output) references both templates
- All steps are correctly numbered
  </verify>
  <done>
SKILL.md Process section includes mode detection and template selection.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create audit-report-quick.md template</name>
  <files>skill/templates/audit-report-quick.md</files>
  <action>
Create a new file `skill/templates/audit-report-quick.md` with the abbreviated quick audit report template.

**Template structure:**

```markdown
# RFU Quick Audit Report

**Project:** {{project_name}}
**Path:** {{project_path}}
**Mode:** Quick Triage (5 gates)
**Date:** {{audit_date}}

---

## Quick Score: {{quick_score}}/5 -- {{triage_recommendation}}

{{recommendation_text}}

---

## Gate Results

### Gate 1: The 5 Whys of Utility {{gate1_status}}

**Bedrock need:** {{bedrock_need}}

**Verdict:** {{gate1_verdict}}

---

### Gate 3: The 10-Minute Test {{gate3_status}}

**Total time:** {{time_total}}

**Verdict:** {{gate3_verdict}}

---

### Gate 4: Bartender Test {{gate4_status}}

**One-sentence explanation:** {{bartender_sentence}}

**Verdict:** {{gate4_verdict}}

---

### Gate 5: Wallet Test {{gate5_status}}

**Would you pay?** {{wallet_self}}

**3 people who would pay:**
1. {{wallet_person1}}
2. {{wallet_person2}}
3. {{wallet_person3}}

**Verdict:** {{gate5_verdict}}

---

### Gate 9: Occam's Razor {{gate9_status}}

**Simpler alternative exists?** {{occam_simpler}}

**Verdict:** {{gate9_verdict}}

---

## Quick Scorecard

| Gate | Name | Status |
|------|------|--------|
| 1 | 5 Whys | {{gate1_status}} |
| 3 | 10-Minute | {{gate3_status}} |
| 4 | Bartender | {{gate4_status}} |
| 5 | Wallet | {{gate5_status}} |
| 9 | Occam's Razor | {{gate9_status}} |

**Quick Score: {{quick_score}}/5**

---

## Next Steps

{{next_steps}}

---

**Note:** This is a quick triage audit (5 of 11 gates). For complete evaluation including friction analysis, second-order effects, and Pareto principle, run:

```
/rfu-audit {{project_path}}
```

Full audit includes Gates 2, 6, 7, 8, 10, 11 and takes 45-90 minutes.

---

*Generated by `/rfu-audit --quick` -- [RFU Framework](https://github.com/aplaceforallmystuff/claude-rfu-audit)*
```

**Key differences from full template:**
- No executive summary (triage verdict is the summary)
- Only 5 gates shown (1, 3, 4, 5, 9)
- Condensed gate output (key fields only, no full detail)
- No Priority Fixes section (not relevant for triage)
- Clear note about running full audit
- Different footer indicating quick mode
  </action>
  <verify>
Read skill/templates/audit-report-quick.md and confirm:
- File exists
- Contains exactly 5 gate sections (1, 3, 4, 5, 9)
- Has Quick Score header with triage_recommendation variable
- Has Quick Scorecard table
- Has Next Steps section
- Has note about running full audit
- Footer indicates --quick mode
  </verify>
  <done>
audit-report-quick.md template exists with abbreviated 5-gate structure and triage focus.
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. Read SKILL.md and verify --quick flag documented in Usage
2. Read SKILL.md and verify Process section has mode detection
3. Read templates/audit-report-quick.md and verify structure
4. Compare quick template to full template - should be notably shorter
5. Verify all template variables in quick template match those documented in gates-quick.md
</verification>

<success_criteria>
- SKILL.md Usage shows --quick flag with mode table
- SKILL.md Process includes mode detection step
- templates/audit-report-quick.md exists
- Quick template has 5 gates only (1, 3, 4, 5, 9)
- Quick template has triage recommendation variables
- Quick template notes how to run full audit
- Quick template is notably shorter than full template
</success_criteria>

<output>
After completion, create `.planning/phases/04-quick-audit-mode/04-02-SUMMARY.md`
</output>
