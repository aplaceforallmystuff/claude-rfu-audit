---
phase: 06-actionable-output
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/reference/TEMPLATE-SPEC.md
autonomous: true

must_haves:
  truths:
    - "All template variables are documented in one reference file"
    - "Each variable shows its type, gate, and expected format"
    - "Dynamic sections (Priority Matrix) are documented separately"
    - "Quick mode template variables are distinguished from full mode"
  artifacts:
    - path: "skill/reference/TEMPLATE-SPEC.md"
      provides: "Complete template variable documentation"
      contains: "Template Variables"
  key_links:
    - from: "skill/reference/TEMPLATE-SPEC.md"
      to: "skill/templates/audit-report.md"
      via: "documents variables used in template"
      pattern: "gate\\d+_status"
    - from: "skill/reference/TEMPLATE-SPEC.md"
      to: "skill/config/gates-full.md"
      via: "references gate definitions"
      pattern: "See gates-full.md"
---

<objective>
Create TEMPLATE-SPEC.md documenting all template variables used in audit report templates.

Purpose: Provides single reference for all template variables, their types, sources, and expected formats. Satisfies requirement ARCH-08.

Output: `skill/reference/TEMPLATE-SPEC.md` with complete variable documentation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-actionable-output/06-CONTEXT.md
@skill/templates/audit-report.md
@skill/templates/audit-report-quick.md
@skill/config/gates-full.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create reference directory if needed</name>
  <files>skill/reference/</files>
  <action>
Create the `skill/reference/` directory if it doesn't already exist.

This directory will hold reference documentation like TEMPLATE-SPEC.md.
  </action>
  <verify>
- Directory `skill/reference/` exists
  </verify>
  <done>
Reference directory exists and is ready for TEMPLATE-SPEC.md
  </done>
</task>

<task type="auto">
  <name>Task 2: Create TEMPLATE-SPEC.md</name>
  <files>skill/reference/TEMPLATE-SPEC.md</files>
  <action>
Create `skill/reference/TEMPLATE-SPEC.md` with the following structure:

**1. Header and Purpose:**
```markdown
# Template Variable Specification

This document specifies all variables used in the RFU audit report templates.

**Templates covered:**
- `templates/audit-report.md` (full audit, 11 gates)
- `templates/audit-report-quick.md` (quick audit, 5 gates)

**Variable sources:**
- Gate-specific variables defined in `config/gates-full.md`
- Report metadata (project_name, audit_date, etc.)
- Computed values (score, rating, triage_recommendation)
- Dynamic sections (Priority Matrix) generated per `guides/PRIORITY-MATRIX.md`
```

**2. Report Metadata Variables:**

| Variable | Type | Description | Example |
|----------|------|-------------|---------|
| `project_name` | string | Name of the audited project | "my-cli-tool" |
| `project_path` | string | Absolute path to project | "/Users/jim/Dev/my-cli-tool" |
| `audit_date` | string | Date of audit (ISO format) | "2026-01-28" |
| `score` | integer | Total passing gates (0-11 or 0-5) | 8 |
| `rating` | string | Score band label | "Almost There" |
| `summary` | string | Executive summary paragraph | "Project passes 8 of 11 gates..." |

**3. Quick Mode Specific Variables:**

| Variable | Type | Description | Used In |
|----------|------|-------------|---------|
| `quick_score` | integer | Quick audit score (0-5) | audit-report-quick.md |
| `triage_recommendation` | string | PROCEED/PROMISING/BORDERLINE/STOP | audit-report-quick.md |
| `recommendation_text` | string | Triage guidance paragraph | audit-report-quick.md |

**4. Gate Variables (per gate):**

For each gate N (1-11), document all variables. Group by gate.

**Gate 1: 5 Whys of Utility (8 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate1_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `why1` | string | Free text | Answer to first why |
| `why2` | string | Free text | Answer to second why |
| `why3` | string | Free text | Answer to third why |
| `why4` | string | Free text | Answer to fourth why |
| `why5` | string | Free text | Answer to fifth why |
| `bedrock_need` | string | One of: Autonomy, Time, Money, Status, Connection, Safety | Identified bedrock need |
| `gate1_verdict` | string | Free text | Explanation of pass/fail |

**Gate 2: Inversion Test (5 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate2_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `inversion_notice` | string | Yes/No + explanation | Would anyone notice? |
| `inversion_alternative` | string | Free text | What they'd use instead |
| `inversion_severity` | string | Low/Medium/High + explanation | Consequence severity |
| `gate2_verdict` | string | Free text | Explanation of pass/fail |

**Gate 3: 10-Minute Test (13 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate3_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `time_discovery` | string | Duration (e.g., "30 sec") | Time to discover |
| `notes_discovery` | string | Free text | Discovery notes |
| `time_comprehension` | string | Duration | Time to understand |
| `notes_comprehension` | string | Free text | Comprehension notes |
| `time_install` | string | Duration | Time to install |
| `notes_install` | string | Free text | Installation notes |
| `time_first_use` | string | Duration | Time to first use |
| `notes_first_use` | string | Free text | First use notes |
| `time_aha` | string | Duration | Time to aha moment |
| `notes_aha` | string | Free text | Aha moment notes |
| `time_total` | string | Duration (e.g., "8 min 30 sec") | Total time |
| `gate3_verdict` | string | Free text | Explanation of pass/fail |

**Gate 4: Bartender Test (6 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate4_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `bartender_sentence` | string | Single sentence | One-sentence explanation |
| `bartender_jargon` | string | Yes/No | Uses technical jargon? |
| `bartender_value` | string | Yes/No | Describes value not implementation? |
| `bartender_immediate` | string | Yes/No | Immediate understanding? |
| `gate4_verdict` | string | Free text | Explanation of pass/fail |

**Gate 5: Wallet Test (7 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate5_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `wallet_self` | string | Yes/No | Would YOU pay $20/month? |
| `wallet_self_reason` | string | Free text | Reasoning for answer |
| `wallet_person1` | string | Real name + context | First person who would pay |
| `wallet_person2` | string | Real name + context | Second person who would pay |
| `wallet_person3` | string | Real name + context | Third person who would pay |
| `gate5_verdict` | string | Free text | Explanation of pass/fail |

**Gate 6: Job-to-be-Done (8 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate6_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `jtbd_situation` | string | Free text | The situation/context |
| `jtbd_motivation` | string | Free text | What they want to do |
| `jtbd_outcome` | string | Free text | What they want to achieve |
| `jtbd_specific` | string | Yes/No | Is situation specific? |
| `jtbd_motivation_clear` | string | Yes/No | Is motivation clear? |
| `jtbd_outcome_clear` | string | Yes/No | Is outcome tangible? |
| `gate6_verdict` | string | Free text | Explanation of pass/fail |

**Gate 7: Friction Audit (14 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate7_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `friction_discovery` | string | Low/Medium/High | Discovery friction level |
| `friction_discovery_issue` | string | Free text | Specific issue if any |
| `friction_comprehension` | string | Low/Medium/High | Comprehension friction |
| `friction_comprehension_issue` | string | Free text | Specific issue if any |
| `friction_install` | string | Low/Medium/High | Installation friction |
| `friction_install_issue` | string | Free text | Specific issue if any |
| `friction_first` | string | Low/Medium/High | First use friction |
| `friction_first_issue` | string | Free text | Specific issue if any |
| `friction_repeated` | string | Low/Medium/High | Repeated use friction |
| `friction_repeated_issue` | string | Free text | Specific issue if any |
| `friction_mastery` | string | Low/Medium/High | Mastery friction |
| `friction_mastery_issue` | string | Free text | Specific issue if any |
| `friction_highest` | string | Free text | Highest friction point |
| `gate7_verdict` | string | Free text | Explanation of pass/fail |

**Gate 8: Second-Order Consequences (9 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate8_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `second_viral` | string | Free text | Viral potential assessment |
| `second_ecosystem` | string | Free text | Ecosystem potential |
| `second_retention` | string | Free text | Retention potential |
| `second_lockin` | string | Free text | Lock-in concerns |
| `second_maintenance` | string | Free text | Maintenance burden |
| `second_dependencies` | string | Free text | Dependency concerns |
| `second_net` | string | Positive/Negative/Neutral | Net assessment |
| `gate8_verdict` | string | Free text | Explanation of pass/fail |

**Gate 9: Occam's Razor (6 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate9_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `occam_fewer` | string | Yes/No + explanation | Could fewer features work? |
| `occam_simpler` | string | Yes/No + explanation | Simpler tool exists? |
| `occam_overengineered` | string | Yes/No + explanation | Is it over-engineered? |
| `occam_essential` | string | Yes/No + explanation | Essential complexity only? |
| `gate9_verdict` | string | Free text | Explanation of pass/fail |

**Gate 10: Pareto Gate (5 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate10_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `pareto_one_feature` | string | Free text | The ONE feature that matters |
| `pareto_cuttable` | string | Free text | Features that could be cut |
| `pareto_concentration` | string | Free text | Value concentration assessment |
| `gate10_verdict` | string | Free text | Explanation of pass/fail |

**Gate 11: Regret Minimization (4 variables)**

| Variable | Type | Format | Description |
|----------|------|--------|-------------|
| `gate11_status` | emoji | pass: check, fail: x | Gate pass/fail indicator |
| `regret_answer` | string | Yes/No | Would regret NOT shipping? |
| `regret_reasoning` | string | Free text | Reasoning for answer |
| `gate11_verdict` | string | Free text | Explanation of pass/fail |

**5. Dynamic Sections:**

Document that the Priority Matrix section is dynamically generated:

```markdown
## Dynamic Sections

### Priority Matrix

The Priority Matrix section is generated dynamically following `guides/PRIORITY-MATRIX.md`.
It does not use static template variables.

**Structure:**
- Top Priority Fixes (up to 3 failed gates, detailed)
- Other Failed Gates (remaining failures, compact)
- Recommended/Borderline (near-failing gates)

**Generation process:**
1. Collect all failed gates
2. Rank by impact-effort matrix
3. Assign effort levels per gate defaults (with overrides)
4. Link resources inline
5. Note dependencies (unlocks/blocked by)

See `guides/PRIORITY-MATRIX.md` for complete algorithm.

### Next Steps

The Next Steps section is generated based on score and audit mode:
- Full audit: Action plan based on priority matrix
- Quick audit: Triage recommendation (PROCEED/PROMISING/BORDERLINE/STOP)
```

**6. Variable Count Summary:**

```markdown
## Summary

| Section | Variable Count |
|---------|---------------|
| Report Metadata | 6 |
| Quick Mode Specific | 3 |
| Gate 1 | 8 |
| Gate 2 | 5 |
| Gate 3 | 13 |
| Gate 4 | 6 |
| Gate 5 | 7 |
| Gate 6 | 8 |
| Gate 7 | 14 |
| Gate 8 | 9 |
| Gate 9 | 6 |
| Gate 10 | 5 |
| Gate 11 | 4 |
| **Total** | **94** |

Plus 2 dynamic sections (Priority Matrix, Next Steps).
```
  </action>
  <verify>
- File exists at `skill/reference/TEMPLATE-SPEC.md`
- Contains all 11 gates with variable tables
- Contains report metadata variables
- Contains quick mode specific variables
- Contains dynamic sections documentation
- Variable count summary matches actual count
  </verify>
  <done>
Complete template variable specification exists. Developers can reference this file to understand all template variables, their types, formats, and sources.
  </done>
</task>

</tasks>

<verification>
- [ ] skill/reference/ directory exists
- [ ] TEMPLATE-SPEC.md exists in skill/reference/
- [ ] All 11 gates documented with variable tables
- [ ] Report metadata and quick mode variables documented
- [ ] Dynamic sections (Priority Matrix, Next Steps) documented
- [ ] Variable count summary accurate (94 static + 2 dynamic sections)
</verification>

<success_criteria>
1. Single reference document for all template variables
2. Each variable has type, format, and description
3. Dynamic sections clearly distinguished from static variables
4. Document is complete (covers both full and quick templates)
</success_criteria>

<output>
After completion, create `.planning/phases/06-actionable-output/06-03-SUMMARY.md`
</output>
