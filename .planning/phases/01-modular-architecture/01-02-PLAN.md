---
phase: 01-modular-architecture
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - skill/SKILL.md
autonomous: true

must_haves:
  truths:
    - "SKILL.md references config/gates-full.md for gate definitions"
    - "SKILL.md contains orchestration logic only, not gate details"
    - "/rfu-audit [path] invocation works identically to before"
    - "Gate overview section lists all 11 gates with brief descriptions"
  artifacts:
    - path: "skill/SKILL.md"
      provides: "Orchestration logic with external file references"
      min_lines: 80
      max_lines: 150
  key_links:
    - from: "skill/SKILL.md"
      to: "skill/config/gates-full.md"
      via: "Explicit file reference"
      pattern: "config/gates-full\\.md"
    - from: "skill/SKILL.md"
      to: "skill/templates/audit-report.md"
      via: "Output template reference"
      pattern: "templates/audit-report\\.md"
---

<objective>
Refactor SKILL.md from monolithic file to orchestrator that references external files.

Purpose: SKILL.md becomes the "what to do" file while config/gates-full.md becomes the "how to evaluate" file. This separation enables targeted edits to gate criteria without touching orchestration logic.

Output: Lean SKILL.md (~100-120 lines) that orchestrates the audit process and references config/gates-full.md for gate specifications.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-modular-architecture/01-RESEARCH.md

# Prior plan summary (gates-full.md now exists)
@.planning/phases/01-modular-architecture/01-01-SUMMARY.md

# Current files to reference
@skill/SKILL.md
@skill/config/gates-full.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor SKILL.md to orchestrator</name>
  <files>
    skill/SKILL.md
  </files>
  <action>
Rewrite SKILL.md to remove inline gate definitions and add references to external files.

**Preserve exactly:**
- YAML frontmatter (name, description, user-invocable)
- Philosophy section
- Usage section
- Scoring table
- Integration with Wisdom Skills section
- Related Skills section

**Replace "The 11 Gates" section (lines 26-242) with:**

```markdown
## The 11 Gates

Complete gate definitions are maintained in `config/gates-full.md`. Each gate includes:
- Core question and methodology
- Pass criteria (what constitutes success)
- Fail indicators (red flags)
- Template variables for report generation

### Gate Overview

| Gate | Name | Core Question |
|------|------|---------------|
| 1 | 5 Whys of Utility | What bedrock human need does this serve? |
| 2 | Inversion Test | What if this didn't exist? |
| 3 | 10-Minute Test | Can users get value in 10 minutes? |
| 4 | Bartender Test | Can you explain it in one sentence? |
| 5 | Wallet Test | Would you pay? Name 3 who would. |
| 6 | Job-to-be-Done | What job is the user hiring this for? |
| 7 | Friction Audit | What friction exists discovery to mastery? |
| 8 | Second-Order Consequences | What happens after success? |
| 9 | Occam's Razor | Is this the simplest solution? |
| 10 | Pareto Gate | Does 20% deliver 80% of value? |
| 11 | Regret Minimization | Will you regret NOT building this? |

Refer to `config/gates-full.md` for complete specifications when evaluating each gate.
```

**Update Process section to reference external files:**

```markdown
## Process

When auditing a project:

1. **Read project files**: README, package.json, main source files
2. **Walk through each gate sequentially** (detailed in `config/gates-full.md`)
3. **Score each gate**: Pass (1) or Fail (0)
4. **Provide evidence** for each score
5. **Generate prioritized fix recommendations**
6. **Output structured report** using `templates/audit-report.md`

For borderline cases, consult `guides/EDGE-CASES.md` (when available).
```

**Update Output section:**

```markdown
## Output

Generate a structured audit report using the template in `templates/audit-report.md`.

The template expects variables documented in each gate's "Template Variables" section in `config/gates-full.md`.
```

**Target length:** 100-120 lines (down from 282)

**Critical:** Do NOT change the skill's functional behavior. Same inputs should produce same outputs. This is a structural refactor only.
  </action>
  <verify>
    - `wc -l skill/SKILL.md` shows 80-150 lines (significantly reduced from 282)
    - `grep "config/gates-full.md" skill/SKILL.md` returns matches (references exist)
    - `grep "templates/audit-report.md" skill/SKILL.md` returns match
    - `grep -c "^## Gate" skill/SKILL.md` returns 0 (no inline gate definitions)
    - YAML frontmatter unchanged: `head -5 skill/SKILL.md` shows same metadata
  </verify>
  <done>
    SKILL.md reduced to ~100-120 lines containing only orchestration logic. All gate definitions removed. Explicit references to config/gates-full.md and templates/audit-report.md added. YAML frontmatter preserved.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify skill invocation unchanged</name>
  <files>
    (no files modified - verification only)
  </files>
  <action>
Verify the refactored skill structure is valid and functional.

**Validation checks:**

1. **YAML frontmatter valid:**
   - name: rfu-audit
   - description: present
   - user-invocable: true

2. **File reference validity:**
   - `config/gates-full.md` exists (from Plan 01)
   - `templates/audit-report.md` exists (unchanged)
   - Paths use correct relative format (config/..., templates/...)

3. **Structural completeness:**
   - SKILL.md has: frontmatter, Philosophy, Usage, The 11 Gates (overview), Scoring, Process, Integration, Output, Related Skills
   - No orphaned sections or broken references

4. **No duplicate content:**
   - Gate details NOT in SKILL.md (only in gates-full.md)
   - Template variable documentation NOT in SKILL.md (only in gates-full.md)

**Report any issues found. If all checks pass, note verification complete.**
  </action>
  <verify>
    - All validation checks pass
    - No errors or warnings
  </verify>
  <done>
    Skill structure validated: YAML frontmatter correct, file references valid, all sections present, no duplicate content between SKILL.md and gates-full.md.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. SKILL.md line count: `wc -l skill/SKILL.md` shows 80-150 lines
2. References present: `grep -E "(config|templates|guides)/" skill/SKILL.md` shows all external file references
3. Gate overview: Table with all 11 gates exists in SKILL.md
4. No inline gates: `grep -c "^### Gate [0-9]" skill/SKILL.md` returns 0
5. Frontmatter unchanged: Same name, description, user-invocable values
</verification>

<success_criteria>
- SKILL.md contains orchestration logic only (~100-120 lines)
- SKILL.md explicitly references config/gates-full.md for gate specifications
- SKILL.md explicitly references templates/audit-report.md for output
- Gate overview table lists all 11 gates with brief descriptions
- No gate definitions inline in SKILL.md
- YAML frontmatter identical to original
- Skill remains invocable via `/rfu-audit [path]`
</success_criteria>

<output>
After completion, create `.planning/phases/01-modular-architecture/01-02-SUMMARY.md`
</output>
